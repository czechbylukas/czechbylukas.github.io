<footer class="support-note">
  <div id="footer-text">
    ❤️ I build this site myself to help people learn Czech.  
    If you’d like to support my work, <a id="footer-link" href="../support.html">click here</a>.
  </div>

  <!-- Cookie Consent Banner -->
  <div id="cookie-banner" style="position: fixed; bottom:0; left:0; right:0; background:#333; color:#fff; padding:15px; text-align:center; z-index:9999;">
    I use cookies to improve your experience and for analytics. 
    <button id="accept-cookies" style="background:#fff; color:#333; border:none; padding:5px 10px; cursor:pointer; margin-left:10px;">Accept</button>
  </div>

  <p>© 2025 CzechByLukas | <a href="../privacy.html">Privacy Policy</a></p>
</footer>

<script>
// Hide banner function
function hideBanner() {
  var banner = document.getElementById("cookie-banner");
  if(banner) banner.style.display = "none";
}

// Try setting a cookie
function setCookie(name, value, days) {
  try {
    var expires = "";
    if (days) {
      var date = new Date();
      date.setTime(date.getTime() + (days*24*60*60*1000));
      expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
  } catch(e) {
    console.log("Cookie could not be set:", e);
  }
}

// Read cookie
function getCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i].trim();
    if(c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length);
  }
  return null;
}

// GA load function
function loadGA(){
  var script = document.createElement('script');
  script.async = true;
  script.src = "https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"; // replace with GA4 ID
  script.onload = function() {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX'); // replace with GA4 ID
  };
  document.head.appendChild(script);
}

document.addEventListener("DOMContentLoaded", function(){
  // Immediately hide banner if cookie exists
  if(getCookie("cookies_accepted")) {
    hideBanner();
    loadGA();
  }

  var acceptBtn = document.getElementById("accept-cookies");
  if(acceptBtn){
    acceptBtn.addEventListener("click", function() {
      setCookie("cookies_accepted", "true", 365);
      hideBanner(); // hide immediately
      loadGA();
    });
  }
});
</script>
